@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model IEnumerable<Students_Portal_App.Models.Entities.StudentsPortalInfos>

@{
    ViewData["Title"] = "Students Dashboard";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
    .card-box {
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,.06);
    }

    .circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: conic-gradient(#0d6efd 0deg 40deg, #ffc107 40deg 120deg, #dc3545 120deg 360deg);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #000;
        font-weight: bold;
        background-color: #f8f9fa;
    }

    .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-right: 6px;
    }
</style>

<!-- Summary Section -->

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card card-box p-4">
            <h5>Students Status</h5>
            <div class="d-flex align-items-center">
                <div class="circle me-4">10</div>
                <ul class="list-unstyled">
                    <li>🟢 Total Students : @Model.Count()</li>
                    <li>🟡 Active : @Model.Count(x => x.StudentStatus == "Active")</li>
                    <li>🔴 Inactive : @Model.Count(x => x.StudentStatus != "Active")</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card card-box p-4">
            <h5>Issues of Students</h5>
            <div class="d-flex align-items-center">
                <div class="circle me-4" style="background:conic-gradient(#dc3545 0deg 180deg,#198754 180deg 360deg)"></div>
                <ul class="list-unstyled">
                    <li>🔴 Poor Attendance</li>
                    <li>🟡 Incomplete Data</li>
                    <li>🟢 Good Records</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Table Section -->

<div class="card card-box p-4">
    <div class="d-flex justify-content-between mb-3">
        <h5>Summary</h5>
        <a asp-action="AddStudent" class="btn btn-primary">Add Student</a>
        <a asp-action="AddPaper" class="btn btn-primary">Add Papers</a>
        <a asp-controller="Student" class="btn btn-primary" asp-action="SearchStudent">
            View Papers
        </a>
        <a asp-controller="Student" class="btn btn-primary" asp-action="Dashboard">View Dashboard</a>
        <a asp-controller="Student" class="btn btn-primary" asp-action="StudentPaperDetails">StudentDetails</a>
    </div>

    <table class="table align-middle">
        <thead class="table-light">
            <tr>
                <th>Student ID</th>
                <th>Register Number</th>
                <th>Student Status</th>
                <th>Student Name</th>
                <th>Department</th>
                <th>In Time</th>
                <th>Out Time</th>
            </tr>
        </thead>
        
        <tbody>
            @foreach (var student in Model)
            {
                <tr>
                    <td>@student.StudentId</td>
                    <td>@student.RegisterNumber</td>
                    <td>@student.StudentStatus</td>
                    <td>@student.StudentName</td>
                    <td>@student.Department</td>
                    <td>@student.InTime</td>
                    <td>@student.OutTime</td>
                    <td class="d-flex gap-2">

                        <!-- Edit -->
                        <a asp-action="EditStudent"
                           asp-route-studentId="@student.StudentId"
                           class="btn btn-warning"
                           title="Edit Student">
                            <i class="fa-solid fa-pen-to-square"></i><!--Icon from Bootstrap for Edit Icon-->
                        </a>

                        <!-- Delete -->
                        <form asp-action="DeleteStudent"
                              asp-controller="Student"
                              asp-route-studentId="@student.StudentId"
                              method="post"
                              onsubmit="return confirm('Are you sure you want to delete this student?');">

                            @Html.AntiForgeryToken()<!--Avoid CSRF Attacks or Token attacks-->

                            <button type="submit"
                                    class="btn btn-danger"
                                    title="Delete Student">
                                <i class="fa-solid fa-trash"></i><!--Icon from bootstrap for Delete Icon-->
                            </button>
                        </form>

                        <!-- Upload Photo -->
                        <a asp-action="UploadPhoto"
                           asp-controller="Student"
                           asp-route-studentId="@student.StudentId"
                           class="btn btn-primary"
                           title="Upload Photo">
                            <i class="fa-solid fa-cloud-arrow-up"></i><!--Icon from bootstrap for Upload Photo Icon-->
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

